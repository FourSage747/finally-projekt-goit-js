{"mappings":"AAAA,MAAMA,EAAQC,SAASC,cAAc,iBAC/BC,EAAQF,SAASC,cAAc,UAC/BE,EAAOH,SAASC,cAAc,UAC9BG,EAAWJ,SAASC,cAAc,aAsCxC,SAASI,IACLH,EAAMI,UAAUC,OAAO,O,CApC3BR,EAAMS,iBAAiB,SAAUC,IAC7B,GAA4B,QAAxBA,EAAIC,OAAOC,SACX,OAEJN,IACAD,EAASQ,UAAY,GACrB,MAAMC,EAAcJ,EAAIC,OAAOI,QAAQ,SACjCC,EAAUF,EAAYG,GAEtBC,EAAW,sCAAsCF,oDACvDG,MAFe,sCAAsCH,8CAGhDI,MAAKC,GAAYA,EAASC,SAC1BF,MAAKG,IACFJ,MAAMD,GACDE,MAAKC,GAAYA,EAASC,SAC1BF,MAAKI,IACF,MAGMC,EAHSD,EAAME,QAAQC,MAAK,SAASC,GACvC,MAAwB,YAAjBA,EAAQC,I,IAEIC,IACvBzB,EAASQ,UAwC7B,UAAsBkB,YAAEA,EAAWC,MAAEA,EAAKC,aAAEA,EAAYC,WAAEA,EAAUC,WAAEA,EAAUC,eAAEA,EAAcC,SAAEA,EAAQC,OAAEA,GAAUV,GAClH,MAAMW,EAAQD,EAAO,GAAGE,KACxB,MAAO,uDACyCT,WAAqBC,yDAEvDA,gTASQC,OAAkBC,mCAClBC,mCACAC,mCACAG,qGAITF,0KAGgDT,oD,CAhExBa,CAAYlB,EAAME,IAmB3D,SAAoBiB,EAAS5B,EAAaE,GAC3B2B,aAAaC,QAAQ5B,KAE5BF,EAAYP,UAAUsC,IAAI,cAC1BH,EAAQnC,UAAUsC,IAAI,UACtBH,EAAQI,YAAc,0BAE1BJ,EAAQjC,iBAAiB,SAAS,KAC9BiC,EAAQnC,UAAUC,OAAO,UACzBM,EAAYP,UAAUC,OAAO,cACzBM,EAAYC,QAAQ,gBACpB2B,EAAQI,YAAc,yBACtBH,aAAaI,QAAQ/B,EAASA,KAG9B0B,EAAQI,YAAc,oBACtBH,aAAaK,WAAWhC,G,IAjChBiC,CADgBhD,SAASC,cAAc,eACpBY,EAAaE,GAChCkC,QAAQC,IAAInC,EAAQ,IAEvBoC,OAAMC,IACHH,QAAQG,MAAM,yBAAyCA,EAAM,GAC/D,IAETD,OAAMC,IACHH,QAAQG,MAAM,yBAA0BA,EAAM,GAChD,IAEVjD,EAAKK,iBAAiB,QAASH","sources":["src/Modal.js"],"sourcesContent":["const films = document.querySelector('.gallery_film');\nconst modal = document.querySelector('.modal');\nconst clos = document.querySelector('.close');\nconst modal_wd = document.querySelector('.modal_wd');\nconst key = '51543c3005cb7c47e497dbf65a114fb5';\n\nfilms.addEventListener('click', (evt) => {\n    if (evt.target.nodeName !== \"IMG\") {\n        return;\n    }\n    wind();\n    modal_wd.innerHTML = '';\n    const filmElement = evt.target.closest('.film');\n    const movieId = filmElement.id;\n    const apiUrl = `https://api.themoviedb.org/3/movie/${movieId}?api_key=${key}`;\n    const videoUrl = `https://api.themoviedb.org/3/movie/${movieId}/videos?api_key=${key}`;\n    fetch(apiUrl)\n        .then(response => response.json())\n        .then(data => {\n            fetch(videoUrl)\n                .then(response => response.json())\n                .then(video => {\n                    const result = video.results.find(function(element) {\n                        return element.type === \"Trailer\";\n                      });\n                    const element = result.key;\n                    modal_wd.innerHTML = createModal(data, element);\n                    const library = document.querySelector('.add_remove')\n                    AddRemove(library, filmElement, movieId);\n                    console.log(movieId);\n                })\n                .catch(error => {\n                    console.error('Помилка запиту до API:', error);\n                });\n        })\n        .catch(error => {\n            console.error('Помилка запиту до API:', error);\n        });\n});\nclos.addEventListener('click', wind);\n\nfunction wind () {\n    modal.classList.toggle(\"open\");\n}\n\nfunction AddRemove (library, filmElement, movieId) {\n    const id = localStorage.getItem(movieId);\n    if (id) {\n        filmElement.classList.add(\"my_library\");\n        library.classList.add(\"active\");\n        library.textContent = \"remove from my library\";\n    }\n    library.addEventListener('click', () => {\n        library.classList.toggle(\"active\");\n        filmElement.classList.toggle(\"my_library\");\n        if (filmElement.closest('.my_library')) {\n            library.textContent = \"remove from my library\";\n            localStorage.setItem(movieId, movieId);\n        }\n        else {\n            library.textContent = \"add to my library\";\n            localStorage.removeItem(movieId);\n        }\n    });\n}\n\nfunction createModal ({ poster_path, title, vote_average, vote_count, popularity, original_title, overview, genres }, element) {\n    const genre = genres[0].name;\n    return `\n        <img src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"${title}\">\n        <div class=\"modal_wd1\">\n            <h1>${title}</h1>\n            <div class=\"modal_wd2\">\n                <ul>\n                    <li>Vote / Votes</li>\n                    <li>Popularity</li>\n                    <li>Original Title</li>\n                    <li>Genre</li>\n                </ul>\n                <ul>\n                    <li>${vote_average} / ${vote_count}</li>\n                    <li>${popularity}</li>\n                    <li>${original_title}</li>\n                    <li>${genre}</li>\n                </ul>\n            </div>\n            <span>About</span>\n            <p>${overview}</p>\n            <button type=\"button\" class=\"add_remove\">add to my library</button>\n        </div>\n        <iframe width=\"240\" src=\"https://www.youtube.com/embed/${element}\" frameborder=\"0\" allowfullscreen></iframe>\n    `;\n}"],"names":["$d90a1a64603686ee$var$films","document","querySelector","$d90a1a64603686ee$var$modal","$d90a1a64603686ee$var$clos","$d90a1a64603686ee$var$modal_wd","$d90a1a64603686ee$var$wind","classList","toggle","addEventListener","evt","target","nodeName","innerHTML","filmElement","closest","movieId","id","videoUrl","fetch","then","response","json","data","video","element1","results","find","element","type","key","poster_path","title","vote_average","vote_count","popularity","original_title","overview","genres","genre","name","$d90a1a64603686ee$var$createModal","library","localStorage","getItem","add","textContent","setItem","removeItem","$d90a1a64603686ee$var$AddRemove","console","log","catch","error"],"version":3,"file":"index.be877d60.js.map"}