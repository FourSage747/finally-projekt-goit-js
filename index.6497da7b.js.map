{"mappings":"6oBAAA,MAAMA,EAAQC,SAASC,cAAc,iBAE/BC,GADaF,SAASC,cAAc,eAC7BD,SAASC,cAAc,iBAC9BE,EAAeH,SAASC,cAAc,MACtCG,EAAM,mCAIZ,IAAIC,EAAc,EACdC,EAAgB,GAWb,SAASC,EAAaC,GAC3B,IAAIC,EAAS,GAEXA,EADEH,EACO,qDAAyBF,UAAYI,WAAcF,IAEnD,sDAAwBF,UAAYI,IAG/CE,MAAMD,GACHE,MAAMC,GAAQA,EAAIC,SAClBF,MAAMG,IAC4B,IAA9BA,EAAWC,QAAQC,QAItBb,EAAac,MAAMC,QAAU,OAC7BnB,EAAMoB,UAAY,GAEWT,MAAvB,yDAAwBN,KAC3BO,MAAMC,GAAQA,EAAIC,SAClBF,MAAMS,IACL,MAAMC,EAAY,IAAIC,IACUF,EAArBG,OAAOC,SAASC,IACzBJ,EAAUK,IAAID,EAAME,GAAIF,EAAMG,KAAK,IAGrC,MAAMC,EAAkBf,EAAWC,QAAQe,KAAKC,IAC9C,MAAMC,EAAcD,EAAME,UAAUH,KAAKI,GAAYb,EAAUc,IAAID,KACnE,MAAO,IAAKH,EAAOR,OAAQS,EAAa,IAG1CjC,EAAMoB,UAAwBU,EAUnCC,KACC,EAACM,YAAEA,EAAWC,MAAEA,EAAKC,aAAEA,EAAYX,GAAEA,EAAEJ,OAAEA,MACzC,MAAMgB,EAAY,IAAIC,KAAKF,GAAcG,cACzC,MAAM,iCACkBd,0DACsBS,WAAqBC,oBAC3DA,4BACKd,EAAOmB,KAAK,eAAeH,qBACjC,IAERG,KAAK,IAnBAC,QAAQC,IAAI9B,EAAW,IAExB+B,OAAOC,GAAQH,QAAQI,MAAM,SAAWD,MAtBzC3C,EAAac,MAAMC,QAAU,OAsBiB,IAEjD2B,OAAOC,GAAQH,QAAQI,MAAM,SAAWD,I,CA7C7CE,aAAaC,QACb/C,EAAKgD,iBAAiB,UAAWC,IAC/BA,EAAIC,iBACJ9C,EAAgBJ,EAAKmD,SAASC,YAAYC,MAC1ClD,EAAc,EACdmD,EAAgBC,YAAcpD,EAC9BE,EAAaF,EAAY,IA0Dc,MAAnCqD,EAAc1D,SAAS2D,eAAe,eACtCC,EAAc5D,SAAS2D,eAAe,eACtCH,EAAkBxD,SAAS2D,eAAe,eAEhDD,EAAYR,iBAAiB,SAAS,KAChC7C,EAAc,IAChBA,GAAe,EACfmD,EAAgBC,YAAcpD,EAC9BE,EAAaF,GAGawD,OAAnBC,SAAS,CACdC,IAAK,EACLC,SAAU,W,IAKhBJ,EAAYV,iBAAiB,SAAS,KACpC7C,GAAe,EACfmD,EAAgBC,YAAcpD,EAC9BE,EAAaF,GAGawD,OAAnBC,SAAS,CACdC,IAAK,EACLC,SAAU,UACV,IAIJzD,EAAaF,E","sources":["src/Home.js"],"sourcesContent":["const films = document.querySelector('.gallery_film');\nconst pagination = document.querySelector('.pagination');\nconst form = document.querySelector('.search-form');\nconst search_error = document.querySelector('.p');\nconst key = '51543c3005cb7c47e497dbf65a114fb5';\nconst moviesUrl = 'https://api.themoviedb.org/3/movie/popular';\nconst genresUrl = 'https://api.themoviedb.org/3/genre/movie/list';\nconst keywordUrl = 'https://api.themoviedb.org/3/search/movie';\nlet currentPage = 1;\nlet searchKeyword = '';\n\nlocalStorage.clear();\nform.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n  searchKeyword = form.elements.searchQuery.value;\n  currentPage = 1;\n  currentPageSpan.textContent = currentPage;\n  displayFilms(currentPage);\n});\n// Запит для отримання списку фільмів\nexport function displayFilms(page) {\n  let apiUrl = '';\n  if (searchKeyword) {\n    apiUrl = `${keywordUrl}?api_key=${key}&page=${page}&query=${searchKeyword}`;\n  } else {\n    apiUrl = `${moviesUrl}?api_key=${key}&page=${page}`;\n  }\n\n  fetch(apiUrl)\n    .then((res) => res.json())\n    .then((moviesData) => {\n      if(moviesData.results.length === 0) {\n        search_error.style.display = 'block';\n        return;\n      }\n      search_error.style.display = 'none';\n      films.innerHTML = '';\n      // Запит для отримання списку жанрів\n      fetch(`${genresUrl}?api_key=${key}`)\n        .then((res) => res.json())\n        .then((genresData) => {\n          const genresMap = new Map(); // Створюємо мапу для збереження жанрів\n          genresData.genres.forEach((genre) => {\n            genresMap.set(genre.id, genre.name);\n          });\n\n          const filmsWithGenres = moviesData.results.map((movie) => {\n            const movieGenres = movie.genre_ids.map((genreId) => genresMap.get(genreId));\n            return { ...movie, genres: movieGenres };\n          });\n\n          films.innerHTML = createCards(filmsWithGenres);\n          console.log(moviesData);\n        })\n        .catch((err) => console.error('error:' + err));\n    })\n    .catch((err) => console.error('error:' + err));\n}\n\nfunction createCards(arr) {\n  return arr\n    .map(\n      ({ poster_path, title, release_date, id, genres }) => {\n      const movieYear = new Date(release_date).getFullYear();\n      return`\n      <div class=\"film\" id=\"${id}\">\n        <img src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"${title}\">\n        <h1>${title}</h1>\n        <p><span>${genres.join(', ')}</span>${movieYear}</p>\n      </div>`;\n    })\n    .join('');\n}\n\n// Отримання кнопок пагінації та обробка їх кліків\nconst prevPageBtn = document.getElementById('prevPageBtn');\nconst nextPageBtn = document.getElementById('nextPageBtn');\nconst currentPageSpan = document.getElementById('currentPage');\n\nprevPageBtn.addEventListener('click', () => {\n  if (currentPage > 1) {\n    currentPage -= 1;\n    currentPageSpan.textContent = currentPage;\n    displayFilms(currentPage);\n\n    // Прокручуємо сторінку до верху\n    window.scrollTo({\n      top: 0,\n      behavior: 'smooth' // Зробить прокрутку плавною\n    });\n  }\n});\n\nnextPageBtn.addEventListener('click', () => {\n  currentPage += 1;\n  currentPageSpan.textContent = currentPage;\n  displayFilms(currentPage);\n\n  // Прокручуємо сторінку до верху\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth' // Зробить прокрутку плавною\n  });\n});\n\n// Виводимо фільми на першу сторінку при завантаженні сторінки\ndisplayFilms(currentPage);\n"],"names":["$09a9ab20771371e5$var$films","document","querySelector","$09a9ab20771371e5$var$form","$09a9ab20771371e5$var$search_error","$09a9ab20771371e5$var$key","$09a9ab20771371e5$var$currentPage","$09a9ab20771371e5$var$searchKeyword","$09a9ab20771371e5$export$6125a8b48e0b4dbc","page","apiUrl","fetch","then","res","json","moviesData","results","length","style","display","innerHTML","genresData","genresMap","Map","genres","forEach","genre","set","id","name","filmsWithGenres","map","movie","movieGenres","genre_ids","genreId","get","poster_path","title","release_date","movieYear","Date","getFullYear","join","console","log","catch","err","error","localStorage","clear","addEventListener","evt","preventDefault","elements","searchQuery","value","$09a9ab20771371e5$var$currentPageSpan","textContent","$09a9ab20771371e5$var$prevPageBtn","getElementById","$09a9ab20771371e5$var$nextPageBtn","window","scrollTo","top","behavior"],"version":3,"file":"index.6497da7b.js.map"}